<% handle_meme_column_assignment %>

<% @memes.each_with_index do |meme, n| %>
  
  <div id="meme_<%= meme.id %>" class="meme">
  <%= render :partial => "site/partials/generic_meme", :locals => { :meme => meme, :item => @items_by_meme[meme.id].first, :alternate_content => false  } %>
  <% if meme.number_of_columns == SiteController::MAX_NUMBER_OF_COLUMNS && meme.z_score_strength.ceil >= @memes[0].z_score_strength.ceil-3 %>
    <div class="clear"></div>
    <div class="alternate_content">
      <%= render :partial => "site/partials/alternate_meme", :locals => { :meme => meme, :item => @items_by_meme[meme.id][1], :extra_classes => "alpha" } %>
      <%= render :partial => "site/partials/alternate_meme", :locals => { :meme => meme, :item => @items_by_meme[meme.id][2] } %>
      <%= render :partial => "site/partials/alternate_meme", :locals => { :meme => meme, :item => @items_by_meme[meme.id][3], :extra_classes => "omega" } %>
      <div class="clear"></div>
    </div>
  <% end %>
  </div><!-- meme_<%= meme.id %> -->
  
  <% if meme.break_afterwards %>
  <div class="clear"></div>
  <% end %>
  
<% end %>

<div class="clear"></div>

<p>R.<%= @run.id %> F.<%= @flight.id %></p>

